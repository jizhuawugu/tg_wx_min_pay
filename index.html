<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>微信支付唤起</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
        function getTargetUrl() {
            const query = window.location.search.substring(1);
            const decoded = decodeURIComponent(query);
            return decoded.startsWith("weixin://") ? decoded : null;
        }

        function openWeixin() {
            const url = getTargetUrl();
            if (url) {
                // 延迟唤起
                setTimeout(() => {
                    window.location.href = url;
                }, 100);
            }
        }
    </script>
</head>
<body onload="openWeixin()">
<h2>正在唤起微信支付...</h2>
<p>若未自动跳转，请手动点击按钮：</p>
<a id="manualLink"
   href="#"
   style="display:inline-block;padding:12px 24px;background:#1AAD19;color:white;text-decoration:none;border-radius:5px;">
    前往微信支付
</a>

<script>
    const target = getTargetUrl();
    if (target) {
        document.getElementById("manualLink").href = target;
    } else {
        document.getElementById("manualLink").innerText = "无效链接";
    }
</script>
</body>
</html>
